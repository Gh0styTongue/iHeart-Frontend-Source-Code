import{A as ie,z as re,n as L,Y as ne,$ as q,x as de,g as B,y as W,Z as se,a0 as ce,a1 as ue,a2 as fe,a as G,a3 as j,a4 as $e,q as Y,a5 as be,a6 as ve,a7 as Z,a8 as ge,a9 as H,s as pe,t as V,aa as xe,O as J,ab as he,ac as me,ad as Pe,K as Q,ae as De,af as ye,ag as Ee,ah as Ce,ai as Me,aj as Be}from"./text-CLqYBJ6O.js";import{r as s,R as u}from"./chunk-QMGIS6GS-CFDD2jAw.js";import{A as Fe,B as Se,C as Le,D as we,E as Ie,F as Ve,G as Oe,H as ke,I as Te}from"./create-analytics-DYSkN0SF.js";import{a as Ue,$ as Ne,b as Ae}from"./useListState-DxUKqciB.js";function Ke(t,e){let{collection:o,onLoadMore:a,scrollOffset:i=1}=t,r=s.useRef(null),l=ie(n=>{for(let c of n)c.isIntersecting&&a&&a()});re(()=>(e.current&&(r.current=new IntersectionObserver(l,{root:Fe(e?.current),rootMargin:`0px ${100*i}% ${100*i}% ${100*i}%`}),r.current.observe(e.current)),()=>{r.current&&r.current.disconnect()}),[o,l,e,i])}const _=new WeakMap;function ze(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function He(t,e){let o=_.get(t);if(!o)throw new Error("Unknown list");return`${o.id}-option-${ze(e)}`}function _e(t,e,o){let a=L(t,{labelable:!0}),i=t.selectionBehavior||"toggle",r=t.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&r==="action"&&(r="override");let{listProps:l}=Se({...t,ref:o,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:r}),{focusWithinProps:n}=ne({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),c=q(t.id);_.set(e,{id:c,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:r,UNSTABLE_itemBehavior:t.UNSTABLE_itemBehavior});let{labelProps:$,fieldProps:b}=de({...t,id:c,labelElementType:"span"});return{labelProps:$,listBoxProps:B(a,n,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...B(b,l)})}}function Re(t,e,o){var a,i;let{key:r}=t,l=_.get(e);var n;let c=(n=t.isDisabled)!==null&&n!==void 0?n:e.selectionManager.isDisabled(r);var $;let b=($=t.isSelected)!==null&&$!==void 0?$:e.selectionManager.isSelected(r);var d;let f=(d=t.shouldSelectOnPressUp)!==null&&d!==void 0?d:l?.shouldSelectOnPressUp;var x;let g=(x=t.shouldFocusOnHover)!==null&&x!==void 0?x:l?.shouldFocusOnHover;var h;let p=(h=t.shouldUseVirtualFocus)!==null&&h!==void 0?h:l?.shouldUseVirtualFocus;var m;let C=(m=t.isVirtualized)!==null&&m!==void 0?m:l?.isVirtualized,F=W(),P=W(),y={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?b:void 0};se()&&ce()||(y["aria-label"]=t["aria-label"],y["aria-labelledby"]=F,y["aria-describedby"]=P);let v=e.collection.getItem(r);if(C){let E=Number(v?.index);y["aria-posinset"]=Number.isNaN(E)?void 0:E+1,y["aria-setsize"]=Le(e.collection)}let D=l?.onAction?()=>{var E;return l==null||(E=l.onAction)===null||E===void 0?void 0:E.call(l,r)}:void 0,M=He(e,r),{itemProps:w,isPressed:k,isFocused:I,hasAction:K,allowsSelection:T}=ue({selectionManager:e.selectionManager,key:r,ref:o,shouldSelectOnPressUp:f,allowsDifferentPressOrigin:f&&g,isVirtualized:C,shouldUseVirtualFocus:p,isDisabled:c,onAction:D||!(v==null||(a=v.props)===null||a===void 0)&&a.onAction?fe(v==null||(i=v.props)===null||i===void 0?void 0:i.onAction,D):void 0,linkBehavior:l?.linkBehavior,UNSTABLE_itemBehavior:l?.UNSTABLE_itemBehavior,id:M}),{hoverProps:U}=G({isDisabled:c||!g,onHoverStart(){j()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(r))}}),S=L(v?.props);delete S.id;let N=$e(v?.props);return{optionProps:{...y,...B(S,w,U,N),id:M},labelProps:{id:F},descriptionProps:{id:P},isFocused:I,isFocusVisible:I&&e.selectionManager.isFocused&&j(),isSelected:b,isDisabled:c,isPressed:k,allowsSelection:T,hasAction:K}}function We(t){let{heading:e,"aria-label":o}=t,a=q();return{itemProps:{role:"presentation"},headingProps:e?{id:a,role:"presentation"}:{},groupProps:{role:"group","aria-label":o,"aria-labelledby":e?a:void 0}}}const A=s.createContext({}),X=s.createContext(null),je=s.forwardRef(function(e,o){let{render:a}=s.useContext(X);return u.createElement(u.Fragment,null,a(e,o))});function ee(t,e){var o;let a=t?.renderDropIndicator,i=t==null||(o=t.isVirtualDragging)===null||o===void 0?void 0:o.call(t),r=s.useCallback(l=>{if(i||e?.isDropTarget(l))return a?a(l):u.createElement(je,{target:l})},[e?.target,i,a]);return t?.useDropIndicator?r:void 0}function qe(t,e,o){var a,i;let r=t.focusedKey,l=null;if(!(e==null||(a=e.isVirtualDragging)===null||a===void 0)&&a.call(e)&&(o==null||(i=o.target)===null||i===void 0?void 0:i.type)==="item"&&(l=o.target.key,o.target.dropPosition==="after")){let d=o.collection.getKeyAfter(l),f=null;if(d!=null){var n,c;let x=(c=(n=o.collection.getItem(l))===null||n===void 0?void 0:n.level)!==null&&c!==void 0?c:0;for(;d;){let g=o.collection.getItem(d);if(!g)break;if(g.type!=="item"){d=o.collection.getKeyAfter(d);continue}var $;if((($=g.level)!==null&&$!==void 0?$:0)<=x)break;f=d,d=o.collection.getKeyAfter(d)}}var b;l=(b=d??f)!==null&&b!==void 0?b:l}return s.useMemo(()=>new Set([r,l].filter(d=>d!=null)),[r,l])}const te=s.createContext(null),O=s.createContext(null),at=s.forwardRef(function(e,o){[e,o]=Y(e,o,te);let a=s.useContext(O);return a?u.createElement(ae,{state:a,props:e,listBoxRef:o}):u.createElement(be,{content:u.createElement(ve,e)},i=>u.createElement(Ge,{props:e,listBoxRef:o,collection:i}))});function Ge({props:t,listBoxRef:e,collection:o}){t={...t,collection:o,children:null,items:null};let{layoutDelegate:a}=s.useContext(H),i=Ne({...t,layoutDelegate:a});return u.createElement(ae,{state:i,props:t,listBoxRef:e})}function ae({state:t,props:e,listBoxRef:o}){[e,o]=Y(e,o,we);let{dragAndDropHooks:a,layout:i="stack",orientation:r="vertical",filter:l}=e,n=Ue(t,l),{collection:c,selectionManager:$}=n,b=!!a?.useDraggableCollectionState,d=!!a?.useDroppableCollectionState,{direction:f}=ge(),{disabledBehavior:x,disabledKeys:g}=$,h=Ie({usage:"search",sensitivity:"base"}),{isVirtualized:p,layoutDelegate:m,dropTargetDelegate:C,CollectionRoot:F}=s.useContext(H),P=s.useMemo(()=>e.keyboardDelegate||new Ve({collection:c,collator:h,ref:o,disabledKeys:g,disabledBehavior:x,layout:i,orientation:r,direction:f,layoutDelegate:m}),[c,h,o,x,g,r,f,e.keyboardDelegate,i,m]),{listBoxProps:y}=_e({...e,shouldSelectOnPressUp:b||e.shouldSelectOnPressUp,keyboardDelegate:P,isVirtualized:p},n,o);s.useRef(b),s.useRef(d),s.useEffect(()=>{},[b,d]);let v,D,M,w=!1,k=null,I=s.useRef(null);if(b&&a){v=a.useDraggableCollectionState({collection:c,selectionManager:$,preview:a.renderDragPreview?I:void 0}),a.useDraggableCollection({},v,o);let z=a.DragPreview;k=a.renderDragPreview?u.createElement(z,{ref:I},a.renderDragPreview):null}if(d&&a){D=a.useDroppableCollectionState({collection:c,selectionManager:$});let z=a.dropTargetDelegate||C||new a.ListDropTargetDelegate(c,o,{orientation:r,layout:i,direction:f});M=a.useDroppableCollection({keyboardDelegate:P,dropTargetDelegate:z},D,o),w=D.isDropTarget({type:"root"})}let{focusProps:K,isFocused:T,isFocusVisible:U}=pe(),S=n.collection.size===0,N={isDropTarget:w,isEmpty:S,isFocused:T,isFocusVisible:U,layout:e.layout||"stack",state:n},E=V({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:N}),R=null;S&&e.renderEmptyState&&(R=u.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(N)));let oe=L(e,{global:!0});return u.createElement(xe,null,u.createElement("div",{...B(oe,E,y,K,M?.collectionProps),ref:o,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":w||void 0,"data-empty":S||void 0,"data-focused":T||void 0,"data-focus-visible":U||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},u.createElement(J,{values:[[te,e],[O,n],[A,{dragAndDropHooks:a,dragState:v,dropState:D}],[Oe,{elementType:"div"}],[X,{render:Ye}],[he,{name:"ListBoxSection",render:le}]]},u.createElement(me,null,u.createElement(F,{collection:c,scrollRef:o,persistedKeys:qe($,a,D),renderDropIndicator:ee(a,D)}))),R,k))}function le(t,e,o,a="react-aria-ListBoxSection"){let i=s.useContext(O),{dragAndDropHooks:r,dropState:l}=s.useContext(A),{CollectionBranch:n}=s.useContext(H),[c,$]=Ee();var b;let{headingProps:d,groupProps:f}=We({heading:$,"aria-label":(b=t["aria-label"])!==null&&b!==void 0?b:void 0}),x=V({defaultClassName:a,className:t.className,style:t.style,values:{}}),g=L(t,{global:!0});return delete g.id,u.createElement("section",{...B(g,x,f),ref:e},u.createElement(Te.Provider,{value:{...d,ref:c}},u.createElement(n,{collection:i.collection,parent:o,renderDropIndicator:ee(r,l)})))}const lt=Me(Be,le),ot=Z(Pe,function(e,o,a){let i=Q(o),r=s.useContext(O),{dragAndDropHooks:l,dragState:n,dropState:c}=s.useContext(A),{optionProps:$,labelProps:b,descriptionProps:d,...f}=Re({key:a.key,"aria-label":e?.["aria-label"]},r,i),{hoverProps:x,isHovered:g}=G({isDisabled:!f.allowsSelection&&!f.hasAction,onHoverStart:a.props.onHoverStart,onHoverChange:a.props.onHoverChange,onHoverEnd:a.props.onHoverEnd}),h=null;n&&l&&(h=l.useDraggableItem({key:a.key},n));let p=null;c&&l&&(p=l.useDroppableItem({target:{type:"item",key:a.key,dropPosition:"on"}},c,i));let m=n&&n.isDragging(a.key),C=V({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...f,isHovered:g,selectionMode:r.selectionManager.selectionMode,selectionBehavior:r.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:m,isDropTarget:p?.isDropTarget}});s.useEffect(()=>{a.textValue},[a.textValue]);let F=e.href?"a":"div",P=L(e,{global:!0});return delete P.id,delete P.onClick,u.createElement(F,{...B(P,C,$,x,h?.dragProps,p?.dropProps),ref:i,"data-allows-dragging":!!n||void 0,"data-selected":f.isSelected||void 0,"data-disabled":f.isDisabled||void 0,"data-hovered":g||void 0,"data-focused":f.isFocused||void 0,"data-focus-visible":f.isFocusVisible||void 0,"data-pressed":f.isPressed||void 0,"data-dragging":m||void 0,"data-drop-target":p?.isDropTarget||void 0,"data-selection-mode":r.selectionManager.selectionMode==="none"?void 0:r.selectionManager.selectionMode},u.createElement(J,{values:[[ke,{slots:{[ye]:b,label:b,description:d}}],[De,{isSelected:f.isSelected}]]},C.children))});function Ye(t,e){e=Q(e);let{dragAndDropHooks:o,dropState:a}=s.useContext(A),{dropIndicatorProps:i,isHidden:r,isDropTarget:l}=o.useDropIndicator(t,a,e);return r?null:u.createElement(Je,{...t,dropIndicatorProps:i,isDropTarget:l,ref:e})}function Ze(t,e){let{dropIndicatorProps:o,isDropTarget:a,...i}=t,r=V({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:a}});return u.createElement("div",{...o,...r,role:"option",ref:e,"data-drop-target":a||void 0})}const Je=s.forwardRef(Ze);Z(Ce,function(e,o,a){let i=s.useContext(O),{isLoading:r,onLoadMore:l,scrollOffset:n,...c}=e,$=s.useRef(null),b=s.useMemo(()=>({onLoadMore:l,collection:i?.collection,sentinelRef:$,scrollOffset:n}),[l,n,i?.collection]);Ke(b,$);let d=V({...c,id:void 0,children:a.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),f={tabIndex:-1};return u.createElement(u.Fragment,null,u.createElement("div",{style:{position:"relative",width:0,height:0},inert:Ae(!0)},u.createElement("div",{"data-testid":"loadMoreSentinel",ref:$,style:{position:"absolute",height:1,width:1}})),r&&d.children&&u.createElement("div",{...B(L(e,{global:!0}),f),...d,role:"option",ref:o},d.children))});export{te as $,O as a,at as b,ot as c,A as d,X as e,ee as f,qe as g,Ke as h,_ as i,He as j,lt as k,je as l};
//# sourceMappingURL=ListBox-CPnfUgK6.js.map

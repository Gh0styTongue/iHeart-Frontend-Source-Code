import{a as M,j as x}from"./create-logger-DNtzi1_a.js";import{a as L,d as p,f as U,h as F,P as C,i as G,e as Y,A as W,b as $}from"./play-DDtWrYBn.js";import{u as w,b as H,c as B,d as K,P as N}from"./play-BQDnmloD.js";import{d as b}from"./create-analytics-DYSkN0SF.js";import{l as v}from"./http-error-DJhpcL-Y.js";import{S as u,p as V}from"./use-item-selected-BbUZv3TT.js";import{a as _,r as d}from"./chunk-QMGIS6GS-CFDD2jAw.js";import{$ as h}from"./index-B6aK0ntB.js";import{u as O}from"./amp-client-C2ZZL0mA.js";import{v as I,g as E}from"./text-CLqYBJ6O.js";import{h as R,w as z,x as D,y as k,z as T,L as X}from"./request-info-Bv3SWXDS.js";function q(i){const e=M.c(19),{isAnonymous:s}=O(),{onInAppMessageExit:t,onInAppMessageOpen:o}=p(),n=w();let l;e[0]!==i?(l={...i,type:u.Favorites},e[0]=i,e[1]=l):l=e[1];const a=L(l);let y;e[2]!==n?(y={trigger:D.FOLLOW,origin:z.LISTEN,pageName:n,location:R.OVERFLOW_MENU},e[2]=n,e[3]=y):y=e[3];const c=y;let r;e[4]!==c?(r={context:c},e[4]=c,e[5]=r):r=e[5];const P=H(r);let A;e[6]!==c?(A={context:c},e[6]=c,e[7]=A):A=e[7];const g=B(A);let m;e[8]!==s||e[9]!==P||e[10]!==t||e[11]!==o||e[12]!==n||e[13]!==a||e[14]!==g?(m=j=>{if(!s){a.doPlay(j);return}K({kind:"info",text:X,onInAppMessageOpen:o,onInAppMessageExit:t,messageType:T.FOLLOW,userTriggered:!0,pageName:n,location:R.OVERFLOW_MENU,actions:[{kind:"tertiary",size:{mobile:"small",medium:"large"},color:"gray",textColor:I.color.gray600,href:P.toString(),onPress:()=>{t({messageType:T.FOLLOW,exitType:k.CLICK_SUCCESS,pageName:n})},content:"Log in"},{kind:"tertiary",size:{xsmall:"small",medium:"large"},color:"gray",textColor:I.color.gray600,href:g.toString(),onPress:()=>{t({messageType:T.FOLLOW,exitType:k.CLICK_SUCCESS,pageName:n})},content:"Sign up"}]})},e[8]=s,e[9]=P,e[10]=t,e[11]=o,e[12]=n,e[13]=a,e[14]=g,e[15]=m):m=e[15];const f=m;let S;return e[16]!==f||e[17]!==a?(S={...a,doPlay:f},e[16]=f,e[17]=a,e[18]=S):S=e[18],S}function ce({color:i="white",size:e=40,goToNowPlaying:s,...t}){s=Array.isArray(s)?s:v(s)?[s]:[];const{isAnonymous:o}=O(),n=q(t),{playing:l,stoppable:a}=L({...t,type:u.Favorites}),y=_(),c=d.useMemo(()=>({id:t.id,context:t.context,name:t.name}),[t.id,t.context,t.name]),r=d.useCallback(()=>{y(h("/favorites/:userId?/now-playing",{userId:t.id}))},[y,t.id]),P=b({onPlay:()=>{r()},onPause:()=>{r()},onStop:()=>{r()}},s);return o?x.jsx(U,{color:i,...E({onPress:()=>{F({station:c,playing:l,stoppable:a}),n.doPlay(P)}},{onPress:t.onPress}),isDisabled:t.isDisabled,children:x.jsx(N,{size:e})}):x.jsx(C,{color:i,size:e,type:u.Favorites,...t,...P})}function J(i){const e=G(O()),s=V.usePlayer(),t=Y(),o=d.useMemo(()=>e?u.Playlist:u.PlaylistRadio,[e]),n=d.useCallback(async()=>{await s.load({...i,type:o,targeting:W.get("targetingParams")}),await s.play()},[s,i,o]),l=L({...i,type:o}),a=d.useCallback(function c(r){globalThis.window.setTimeout(()=>{t()?(n(),r?.onPlay?.()):c()},100)},[t,n]),y=d.useCallback(function(r){if(e){l.doPlay(r);return}t()?(n(),r?.onPlay?.()):a(r)},[t,a,n,e,l]);return{...l,doPlay:y}}function ye({color:i="white",type:e=u.Playlist,isDisabled:s=!1,itemId:t,playlistSlug:o,goToNowPlaying:n,size:l=40,...a}){n=Array.isArray(n)?n:v(n)?[n]:[];const y=G(O()),{doPlay:c,playing:r,stoppable:P}=J({...a,type:e,itemId:t}),A=d.useMemo(()=>({id:a.id,context:a.context,name:a.name}),[a.id,a.context,a.name]),g=_(),m=d.useCallback(()=>{o?g(h("/playlist/:playlistSlug/now-playing",{playlistSlug:o})):console.warn("Cannot go to Now Playing tab without a playlistSlug")},[g,o]),f=b({onPlay:()=>{m()},onPause:()=>{m()},onStop:()=>{m()}},n);return e===u.Playlist?y?x.jsx(C,{color:i,isDisabled:s,itemId:t,onPress:()=>{m()},seed:a?.seed,type:u.Playlist,...E(f,a)}):x.jsx(U,{color:i,...E({onPress:()=>{F({station:A,playing:r,stoppable:P}),c(f)}},{onPress:a.onPress})}):y?x.jsx(C,{color:i,isDisabled:s,itemId:t,onPress:()=>{m()},seed:a?.seed,size:l,type:u.Playlist,...E(f,a)}):x.jsx(C,{color:i,isDisabled:s,itemId:t,onPress:()=>{m()},shuffle:!0,size:l,type:u.PlaylistRadio,...E(f,a)})}function ue({color:i="white",size:e=40,goToNowPlaying:s,podcastSlug:t,...o}){s=Array.isArray(s)?s:v(s)?[s]:[];const n=_();t??=$(o.name,o.id);const l=d.useCallback(()=>{t?n(h("/podcast/:podcastSlug/now-playing",{podcastSlug:t})):console.warn("Cannot go to Now Playing tab without a podcastSlug")},[n,t]),a=b({onPlay:()=>{l()},onPause:()=>{l()},onStop:()=>{l()}},s);return x.jsx(C,{color:i,size:e,type:u.Podcast,...E(a,o)})}function me(i){return L({...i,type:u.Podcast})}export{ce as F,ue as P,J as a,q as b,ye as c,me as u};
//# sourceMappingURL=use-podcast-play-HNVcLdnk.js.map
